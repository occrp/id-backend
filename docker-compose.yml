# docker compose config
# http://docs.docker.com/compose/
#
# this is the production configuration
# if you're looking for data import config, use dataimports.yml as your
# compose file
# 
id2:
  build: .
  expose:
    - "8000"
  links:
    - postgres
    - elasticsearch
  volumes:
    - "./:/usr/src/id2/"
    - "settings/settings_local.py-docker:/usr/src/id2/settings/settings_local.py"
    
# dataimports version
id2dataimports:
  build: .
  expose:
    - "8000"
  links:
    - postgres
    - elasticsearch
  volumes:
    - "./:/usr/src/id2/"
    - "settings/settings_local.py-docker:/usr/src/id2/settings/settings_local.py"
    - "../export-prod/:/data"
    - "../google_appengine/:/usr/src/google_appengine/"
    - "../investigative-dashboard/:/usr/src/id/"
  command: /bin/date

# postgres
postgres:
  image: postgres
  volumes:
    - 'db/:/var/lib/postgresql/data'
  environment:
    POSTGRES_USER:     id2
    POSTGRES_PASSWORD: id2
    POSTGRES_DATABASE: id2

# elasticsearch    
elasticsearch:
  image: elasticsearch
